#!/usr/bin/env python
""" This script can be called in terminal (with cmd args) to generate desired plot.

Author: Farmehr Farhour f.farhour@gmail.com

Takes in command line arguments and generates the desired output based on the input given.
Input Data that can be passed to this script:
    - JSON outputs generated by engines on various algorithms
Output that can be created by this script:
    - vega-spec JSON files
    - Plots with formats: SVG, PNG, HTML
Plot types that can be created:
    - Scatter graphs
    - Bar graphs
"""

import scripts.json2vega                    #convert json outputs to vega-spec JSONs
from scripts.utils import parseCmdLineArgs  #function to parse cmd args
import os,sys   #built-in


def main(argv):
    """Creates a bar graph by calling methods in json2vega.py"""

    args = parseCmdLineArgs(argv)  # process input arguments passed
    if not os.path.exists(args.o):  # create output directory
        os.makedirs(args.o)



    # Create required arguments and instantite bar class object for testing.
    conditions = {"algorithm": "BFS",
                  "undirected": True, "mark_predecessors": True}
    axes_vars = {'x': 'dataset', 'y': 'm_teps'}
    names = {'engine_name': 'g', 'algorithm_name': 'BFS',
             'x_axis': 'Datasets', 'y_axis': 'MTEPS', 'file_suffix': '0'}
    bar1 = json2vega.VegaGraphBar(output_path=args.o,
                                  input_path=args.d,
                                  config_dir="config_files",
                                  labels=names,
                                  conditions_dict=conditions,
                                  axes_vars=axes_vars)
    bar1.run(verbose=True)


if __name__ == "__main__":
    main(sys.argv)
